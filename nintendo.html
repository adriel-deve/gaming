<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nintendo Switch - Todos os Jogos | Eshop Pulse</title>
  <!-- Fontes do sistema para carregamento r√°pido -->
  <style>
    :root {
      --bg: #0a0a0f;
      --bg-soft: #11131a;
      --panel: rgba(255, 255, 255, 0.04);
      --panel-strong: rgba(255, 255, 255, 0.08);
      --text: #f7f7f7;
      --muted: #a7acb7;
      --accent: #ff3b3b;
      --accent-strong: #ff5a5a;
      --border: rgba(255, 255, 255, 0.12);
      --shadow: 0 30px 80px rgba(0, 0, 0, 0.5);
      --radius-lg: 26px;
      --radius-md: 16px;
      --radius-sm: 10px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #0a0a0f;
      color: var(--text);
      min-height: 100vh;
      line-height: 1.5;
      overflow-x: hidden;
    }

    .container {
      width: min(1160px, 92vw);
      margin: 0 auto;
    }

    /* Header */
    .topbar {
      position: sticky;
      top: 0;
      z-index: 10;
      background: #0a0a0f;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .topbar-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 18px 0;
      gap: 16px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      text-decoration: none;
      color: inherit;
    }

    .brand-mark {
      width: 42px;
      height: 42px;
      border-radius: 8px;
      background: var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-weight: 700;
      letter-spacing: 1px;
    }

    .brand-name {
      font-size: 1.2rem;
      font-weight: 600;
    }

    .brand-tag {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--muted);
    }

    .nav {
      display: flex;
      gap: 18px;
      font-size: 0.95rem;
    }

    .nav a {
      position: relative;
      padding-bottom: 6px;
      transition: color 0.2s ease;
      text-decoration: none;
      color: var(--muted);
    }

    .nav a.active {
      color: var(--text);
    }

    .nav a::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: 0;
      width: 0;
      height: 2px;
      background: var(--accent);
      transition: width 0.2s ease;
    }

    .nav a.active::after {
      width: 100%;
    }

    /* Page Header */
    .page-header {
      padding: 60px 0 40px;
      text-align: center;
    }

    .page-header h1 {
      font-size: 3rem;
      font-weight: 700;
      letter-spacing: 1px;
      margin-bottom: 12px;
    }

    .page-header p {
      color: var(--muted);
      font-size: 1.1rem;
    }

    /* Filters */
    .filters {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 24px;
      margin-bottom: 32px;
    }

    .filter-row {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
    }

    .filter-pill {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 16px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(255, 255, 255, 0.03);
      font-size: 0.9rem;
    }

    .filter-pill select, .filter-pill input {
      background: transparent;
      border: none;
      color: var(--text);
      outline: none;
      cursor: pointer;
    }

    /* Stats */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 32px;
    }

    .stat-card {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 20px;
    }

    .stat-label {
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      color: var(--muted);
      margin-bottom: 8px;
    }

    .stat-value {
      font-size: 2rem;
      font-weight: 600;
      color: var(--accent);
    }

    /* Games Grid */
    .games-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 60px;
    }

    .game-card {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      cursor: pointer;
      text-decoration: none;
      color: inherit;
      display: block;
      contain: content;
    }

    .game-card:hover {
      border-color: var(--accent);
    }

    .game-cover {
      width: 100%;
      height: 160px;
      background: #1a1a2e;
      border-radius: 8px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 0.9rem;
      text-align: center;
      padding: 12px;
    }

    .game-title {
      font-weight: 600;
      margin-bottom: 6px;
      font-size: 1rem;
    }

    .game-region {
      font-size: 0.85rem;
      color: var(--muted);
      margin-bottom: 12px;
    }

    .game-prices {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .price {
      font-size: 1.2rem;
      font-weight: 600;
    }

    .price-old {
      font-size: 0.9rem;
      text-decoration: line-through;
      color: var(--muted);
    }

    .badge {
      background: var(--accent);
      color: white;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 0.8rem;
      font-weight: 600;
    }

    .badge-success {
      background: #10b981;
    }

    /* Loading */
    #loading {
      text-align: center;
      padding: 60px 20px;
      font-size: 1.2rem;
      color: var(--muted);
    }

    @media (max-width: 768px) {
      .page-header h1 {
        font-size: 2.5rem;
      }

      .games-grid {
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <div class="topbar">
    <div class="container topbar-inner">
      <div class="brand">
        <div class="brand-mark">EP</div>
        <div>
          <div class="brand-name">Eshop Pulse</div>
          <div class="brand-tag">Comparador global de jogos</div>
        </div>
      </div>
      <nav class="nav">
        <a href="nintendo.html" class="active">Nintendo</a>
        <a href="playstation.html">PlayStation</a>
        <a href="xbox.html">Xbox</a>
        <a href="pc.html">PC</a>
        <a href="index.html#midias-fisicas">M√≠dias F√≠sicas</a>
        <a href="index.html#destaques">Destaques</a>
      </nav>
    </div>
  </div>

  <!-- Main Content -->
  <div class="container">
    <!-- Page Header -->
    <div class="page-header">
      <h1>NINTENDO SWITCH</h1>
      <p>Todos os jogos com compara√ß√£o de pre√ßos em 27 pa√≠ses</p>
    </div>

    <!-- Filters -->
    <div class="filters">
      <div class="filter-row">
        <label class="filter-pill">
          <span>üîç</span>
          <input type="text" id="searchInput" placeholder="Buscar jogo..." style="width: 200px;" />
        </label>
        <label class="filter-pill">
          <span>Mostrar:</span>
          <select id="filterType">
            <option value="all">Todos os jogos</option>
            <option value="sale">Apenas promo√ß√µes</option>
            <option value="no-sale">Sem desconto</option>
          </select>
        </label>
        <label class="filter-pill">
          <span>Regi√£o:</span>
          <select id="filterRegion">
            <option value="all">Todas</option>
            <option value="US">Estados Unidos</option>
            <option value="BR">Brasil</option>
            <option value="EU">Europa</option>
            <option value="JP">Jap√£o</option>
          </select>
        </label>
        <label class="filter-pill">
          <span>Ordenar:</span>
          <select id="sortBy">
            <option value="relevance">Relev√¢ncia</option>
            <option value="discount">Maior desconto</option>
            <option value="price-low">Menor pre√ßo</option>
            <option value="price-high">Maior pre√ßo</option>
            <option value="title">T√≠tulo (A-Z)</option>
          </select>
        </label>
      </div>
    </div>

    <!-- Stats -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-label">Total de Jogos</div>
        <div class="stat-value" id="totalGames">0</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Em Promo√ß√£o</div>
        <div class="stat-value" id="totalSales">0</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Desconto M√©dio</div>
        <div class="stat-value" id="avgDiscount">0%</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Maior Desconto</div>
        <div class="stat-value" id="maxDiscount">0%</div>
      </div>
    </div>

    <!-- Loading -->
    <div id="loading">Carregando jogos...</div>

    <!-- Games Grid -->
    <div class="games-grid" id="gamesGrid" style="display: none;"></div>
  </div>

  <script>
    let allGames = [];
    let filteredGames = [];
    let displayedGames = [];
    let currentIndex = 0;
    const GAMES_PER_PAGE = 50; // Carregar 50 jogos por vez
    let isLoading = false;

    // Carregar jogos
    async function loadGames() {
      try {
        // Tentar carregar do arquivo JSON externo
        const response = await fetch('data/nintendo-games.json');
        if (response.ok) {
          const data = await response.json();
          allGames = data || [];
          console.log(`‚úÖ Carregados ${allGames.length} jogos do arquivo JSON`);
        } else {
          throw new Error('JSON n√£o dispon√≠vel');
        }
      } catch (error) {
        console.log('Arquivo JSON n√£o dispon√≠vel, usando dados locais (fallback)');
        allGames = getLocalGames();
      }

      filteredGames = [...allGames];
      currentIndex = 0;
      displayedGames = [];
      updateStats();
      loadMoreGames(); // Carregar primeira leva de jogos

      document.getElementById('loading').style.display = 'none';
      document.getElementById('gamesGrid').style.display = 'grid';
    }

    // Carregar mais jogos (scroll infinito)
    function loadMoreGames() {
      if (isLoading) return;
      if (currentIndex >= filteredGames.length) return;

      isLoading = true;
      const endIndex = Math.min(currentIndex + GAMES_PER_PAGE, filteredGames.length);
      const newGames = filteredGames.slice(currentIndex, endIndex);

      displayedGames.push(...newGames);
      currentIndex = endIndex;

      renderGames();
      isLoading = false;
    }

    // Observer para scroll infinito
    let observer = null;
    function setupInfiniteScroll() {
      if (observer) observer.disconnect();

      const sentinel = document.getElementById('sentinel');
      if (!sentinel) return;

      observer = new IntersectionObserver((entries) => {
        if (entries[0].isIntersecting && !isLoading) {
          loadMoreGames();
        }
      }, { rootMargin: '200px' });

      observer.observe(sentinel);
    }

    // Dados locais (backup - primeiros 200 jogos)
    function getLocalGames() {
      // Atualizado automaticamente a cada 6 horas via GitHub Actions
      // Total: 1052 jogos em promo√ß√£o | Mostrando primeiros 200 como fallback
      return [
        { title: "#1 Anagrams", discount_percent: 50, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "1-anagrams-switch" },
        { title: "#1 Crosswords", discount_percent: 50, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "1-crosswords-switch" },
        { title: "#1 Crosswords Bundle", discount_percent: 58, msrp: 14.44, sale_price: 14.44, currency: "BRL", region: "US", game_id: "1-crosswords-bundle-switch" },
        { title: "#1 Sudokus", discount_percent: 50, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "1-sudokus-switch" },
        { title: "#NoLimitFantasy, Super Puzzles Dream", discount_percent: 67, msrp: 11.95, sale_price: 11.95, currency: "BRL", region: "US", game_id: "nolimitfantasy-super-puzzles-dream-switch" },
        { title: "#RaceDieRun", discount_percent: 80, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "racedierun-switch" },
        { title: "#Wish travel, Super Puzzles Dream", discount_percent: 67, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "wish-travel-super-puzzles-dream-switch" },
        { title: "#womenUp, Super Puzzles Dream", discount_percent: 67, msrp: 11.95, sale_price: 11.95, currency: "BRL", region: "US", game_id: "womenup-super-puzzles-dream-switch" },
        { title: "#Xmas, Super Puzzles Dream", discount_percent: 67, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "xmas-super-puzzles-dream-switch" },
        { title: "15in1 Solitaire", discount_percent: 20, msrp: 13.86, sale_price: 13.86, currency: "BRL", region: "US", game_id: "15in1-solitaire-switch" },
        { title: "2048 Battles", discount_percent: 50, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "2048-battles-switch" },
        { title: "32 Secs", discount_percent: 70, msrp: 43.50, sale_price: 43.50, currency: "BRL", region: "US", game_id: "32-secs-switch" },
        { title: "39 Days to Mars", discount_percent: 33, msrp: 58.23, sale_price: 58.23, currency: "BRL", region: "US", game_id: "39-days-to-mars-switch" },
        { title: "64.0", discount_percent: 33, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "640-switch" },
        { title: "8-Ball Pocket", discount_percent: 67, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "8-ball-pocket-switch" },
        { title: "99Moves", discount_percent: 33, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "99moves-switch" },
        { title: "99Seconds", discount_percent: 33, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "99seconds-switch" },
        { title: "A Short Hike", discount_percent: 30, msrp: 32.42, sale_price: 32.42, currency: "BRL", region: "US", game_id: "a-short-hike-switch" },
        { title: "Absolute Drift", discount_percent: 65, msrp: 24.30, sale_price: 24.30, currency: "BRL", region: "US", game_id: "absolute-drift-switch" },
        { title: "Abyss", discount_percent: 33, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "abyss-switch" },
        { title: "ABZ√õ", discount_percent: 60, msrp: 46.34, sale_price: 46.34, currency: "BRL", region: "US", game_id: "abzu-switch" },
        { title: "Adventure Pinball Bundle", discount_percent: 70, msrp: 15.60, sale_price: 15.60, currency: "BRL", region: "US", game_id: "adventure-pinball-bundle-switch" },
        { title: "Aeolis Tournament", discount_percent: 85, msrp: 12.99, sale_price: 12.99, currency: "BRL", region: "US", game_id: "aeolis-tournament-switch" },
        { title: "Aery ‚Äì A Journey Beyond Time", discount_percent: 80, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "aery-a-journey-beyond-time-switch" },
        { title: "Aery - Dreamscape", discount_percent: 35, msrp: 37.64, sale_price: 37.64, currency: "BRL", region: "US", game_id: "aery-dreamscape-switch" },
        { title: "Aery - Little Bird Adventure", discount_percent: 50, msrp: 20.24, sale_price: 20.24, currency: "BRL", region: "US", game_id: "aery-little-bird-adventure-switch" },
        { title: "Aery - Sky Castle", discount_percent: 50, msrp: 28.94, sale_price: 28.94, currency: "BRL", region: "US", game_id: "aery-sky-castle-switch" },
        { title: "Ageless", discount_percent: 75, msrp: 21.69, sale_price: 21.69, currency: "BRL", region: "US", game_id: "ageless-switch" },
        { title: "Air Hockey", discount_percent: 80, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "air-hockey-switch" },
        { title: "Alex Kidd in Miracle World DX", discount_percent: 60, msrp: 46.34, sale_price: 46.34, currency: "BRL", region: "US", game_id: "alex-kidd-in-miracle-world-dx-switch" },
        { title: "Aloof", discount_percent: 80, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "aloof-switch" },
        { title: "Alpaca Ball: Allstars", discount_percent: 30, msrp: 81.14, sale_price: 81.14, currency: "BRL", region: "US", game_id: "alpaca-ball-allstars-switch" },
        { title: "Alteric", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "alteric-switch" },
        { title: "Amazing Breaker", discount_percent: 50, msrp: 23.14, sale_price: 23.14, currency: "BRL", region: "US", game_id: "amazing-breaker-switch" },
        { title: "An NPC‚Äôs Odyssey", discount_percent: 10, msrp: 26.04, sale_price: 26.04, currency: "BRL", region: "US", game_id: "an-npcs-odyssey-switch" },
        { title: "Animal Bomber", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "animal-bomber-switch" },
        { title: "Animated Jigsaws: Beautiful Japanese Scenery", discount_percent: 75, msrp: 14.44, sale_price: 14.44, currency: "BRL", region: "US", game_id: "animated-jigsaws-beautiful-japanese-scenery-switch" },
        { title: "Anna's Quest", discount_percent: 90, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "annas-quest-switch" },
        { title: "Armed 7 DX", discount_percent: 70, msrp: 12.12, sale_price: 12.12, currency: "BRL", region: "US", game_id: "armed-7-dx-switch" },
        { title: "art of rally", discount_percent: 35, msrp: 94.19, sale_price: 94.19, currency: "BRL", region: "US", game_id: "art-of-rally-switch" },
        { title: "Automachef", discount_percent: 80, msrp: 17.34, sale_price: 17.34, currency: "BRL", region: "US", game_id: "automachef-switch" },
        { title: "Badland: Game of the Year Edition", discount_percent: 66, msrp: 11.77, sale_price: 11.77, currency: "BRL", region: "US", game_id: "badland-game-of-the-year-edition-switch" },
        { title: "Baila Latino", discount_percent: 30, msrp: 40.54, sale_price: 40.54, currency: "BRL", region: "US", game_id: "baila-latino-switch" },
        { title: "Bakery Master", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "bakery-master-switch" },
        { title: "Ball Physics Draw Puzzles", discount_percent: 34, msrp: 13.46, sale_price: 13.46, currency: "BRL", region: "US", game_id: "ball-physics-draw-puzzles-switch" },
        { title: "Ball Physics Draw Puzzles 2", discount_percent: 33, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "ball-physics-draw-puzzles-2-switch" },
        { title: "Balloon Pop - Learning Letters, Numbers, Colors, Game for Kids", discount_percent: 10, msrp: 78.24, sale_price: 78.24, currency: "BRL", region: "US", game_id: "balloon-pop-learning-letters-numbers-colors-game-for-kids-switch" },
        { title: "Bargain Hunter", discount_percent: 40, msrp: 43.44, sale_price: 43.44, currency: "BRL", region: "US", game_id: "bargain-hunter-switch" },
        { title: "BATTLESHIP", discount_percent: 50, msrp: 57.94, sale_price: 57.94, currency: "BRL", region: "US", game_id: "battleship-switch" },
        { title: "Batu Ta Batu", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "batu-ta-batu-switch" },
        { title: "Beach Buggy Racing", discount_percent: 50, msrp: 28.94, sale_price: 28.94, currency: "BRL", region: "US", game_id: "beach-buggy-racing-switch" },
        { title: "Beach Buggy Racing 2: Island Adventure", discount_percent: 50, msrp: 57.94, sale_price: 57.94, currency: "BRL", region: "US", game_id: "beach-buggy-racing-2-island-adventure-switch" },
        { title: "Between Time: Escape Room", discount_percent: 75, msrp: 14.44, sale_price: 14.44, currency: "BRL", region: "US", game_id: "between-time-escape-room-switch" },
        { title: "Big Pharma", discount_percent: 83, msrp: 28.94, sale_price: 28.94, currency: "BRL", region: "US", game_id: "big-pharma-switch" },
        { title: "BigChick", discount_percent: 50, msrp: 14.44, sale_price: 14.44, currency: "BRL", region: "US", game_id: "bigchick-switch" },
        { title: "Binarystar Infinity", discount_percent: 50, msrp: 14.44, sale_price: 14.44, currency: "BRL", region: "US", game_id: "binarystar-infinity-switch" },
        { title: "BINGO for Nintendo Switch", discount_percent: 50, msrp: 14.44, sale_price: 14.44, currency: "BRL", region: "US", game_id: "bingo-for-nintendo-switch-switch" },
        { title: "Blocky Puzzle", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "blocky-puzzle-switch" },
        { title: "Bomber Fox", discount_percent: 50, msrp: 14.44, sale_price: 14.44, currency: "BRL", region: "US", game_id: "bomber-fox-switch" },
        { title: "BOT.vinnik Chess", discount_percent: 33, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "bot-vinnik-chess-switch" },
        { title: "Bowling", discount_percent: 80, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "bowling-switch" },
        { title: "Box That Ball", discount_percent: 33, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "box-that-ball-switch" },
        { title: "Brawl Chess", discount_percent: 80, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "brawl-chess-switch" },
        { title: "Bridge Constructor Ultimate Edition", discount_percent: 75, msrp: 21.69, sale_price: 21.69, currency: "BRL", region: "US", game_id: "bridge-constructor-ultimate-edition-switch" },
        { title: "Bridge Strike", discount_percent: 72, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "bridge-strike-switch" },
        { title: "Bring Honey Home", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "bring-honey-home-switch" },
        { title: "Bubble Bobble 4 Friends: The Baron is Back!", discount_percent: 40, msrp: 139.14, sale_price: 139.14, currency: "BRL", region: "US", game_id: "bubble-bobble-4-friends-the-baron-is-back-switch" },
        { title: "Bullet Beat", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "bullet-beat-switch" },
        { title: "Burger Chef Tycoon", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "burger-chef-tycoon-switch" },
        { title: "Burger Master", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "burger-master-switch" },
        { title: "Calculation Castle : Greco's Ghostly Challenge "Addition"", discount_percent: 50, msrp: 28.94, sale_price: 28.94, currency: "BRL", region: "US", game_id: "calculation-castle-grecos-ghostly-challenge-addition-switch" },
        { title: "Calculation Castle : Greco's Ghostly Challenge "Division"", discount_percent: 50, msrp: 28.94, sale_price: 28.94, currency: "BRL", region: "US", game_id: "calculation-castle-grecos-ghostly-challenge-division-switch" },
        { title: "Calculation Castle : Greco's Ghostly Challenge "Multiplication"", discount_percent: 50, msrp: 28.94, sale_price: 28.94, currency: "BRL", region: "US", game_id: "calculation-castle-grecos-ghostly-challenge-multiplication-switch" },
        { title: "Calculation Castle : Greco's Ghostly Challenge "Subtraction"", discount_percent: 50, msrp: 28.94, sale_price: 28.94, currency: "BRL", region: "US", game_id: "calculation-castle-grecos-ghostly-challenge-subtraction-switch" },
        { title: "Calculator", discount_percent: 80, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "calculator-switch" },
        { title: "Calico", discount_percent: 30, msrp: 48.66, sale_price: 48.66, currency: "BRL", region: "US", game_id: "calico-switch" },
        { title: "Car Driver Ultimate", discount_percent: 50, msrp: 40.54, sale_price: 40.54, currency: "BRL", region: "US", game_id: "car-driver-ultimate-switch" },
        { title: "Castle Of Pixel Skulls", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "castle-of-pixel-skulls-switch" },
        { title: "Castle on the Coast", discount_percent: 45, msrp: 47.79, sale_price: 47.79, currency: "BRL", region: "US", game_id: "castle-on-the-coast-switch" },
        { title: "Catch 'Em! Goldfish Scooping", discount_percent: 75, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "catch-em-goldfish-scooping-switch" },
        { title: "CATch the Stars", discount_percent: 33, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "catch-the-stars-switch" },
        { title: "Caterpillar Royale", discount_percent: 50, msrp: 14.44, sale_price: 14.44, currency: "BRL", region: "US", game_id: "caterpillar-royale-switch" },
        { title: "Cattails", discount_percent: 80, msrp: 17.34, sale_price: 17.34, currency: "BRL", region: "US", game_id: "cattails-switch" },
        { title: "Chalk Dash Carnival", discount_percent: 70, msrp: 12.30, sale_price: 12.30, currency: "BRL", region: "US", game_id: "chalk-dash-carnival-switch" },
        { title: "Chef Word Ardee", discount_percent: 75, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "chef-word-ardee-switch" },
        { title: "Chess", discount_percent: 80, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "chess-switch" },
        { title: "Chess Ace", discount_percent: 60, msrp: 18.50, sale_price: 18.50, currency: "BRL", region: "US", game_id: "chess-ace-switch" },
        { title: "Chess Brain", discount_percent: 50, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "chess-brain-switch" },
        { title: "Chess Gambit", discount_percent: 57, msrp: 17.34, sale_price: 17.34, currency: "BRL", region: "US", game_id: "chess-gambit-switch" },
        { title: "Chill Panda", discount_percent: 80, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "chill-panda-switch" },
        { title: "Circa Infinity", discount_percent: 80, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "circa-infinity-switch" },
        { title: "City Bus Driving Simulator", discount_percent: 70, msrp: 24.30, sale_price: 24.30, currency: "BRL", region: "US", game_id: "city-bus-driving-simulator-switch" },
        { title: "City Driving Simulator 2", discount_percent: 60, msrp: 32.42, sale_price: 32.42, currency: "BRL", region: "US", game_id: "city-driving-simulator-2-switch" },
        { title: "City Match - A Block Pop Puzzle Game", discount_percent: 72, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "city-match-a-block-pop-puzzle-game-switch" },
        { title: "City Pipes", discount_percent: 34, msrp: 13.46, sale_price: 13.46, currency: "BRL", region: "US", game_id: "city-pipes-switch" },
        { title: "Classic Checkers", discount_percent: 60, msrp: 18.50, sale_price: 18.50, currency: "BRL", region: "US", game_id: "classic-checkers-switch" },
        { title: "Classic Games Collection Vol.1", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "classic-games-collection-vol-1-switch" },
        { title: "Classic Pool", discount_percent: 75, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "classic-pool-switch" },
        { title: "Classic Solitaire", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "classic-solitaire-switch" },
        { title: "Clock Simulator", discount_percent: 50, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "clock-simulator-switch" },
        { title: "Clockwork Aquario", discount_percent: 40, msrp: 69.54, sale_price: 69.54, currency: "BRL", region: "US", game_id: "clockwork-aquario-switch" },
        { title: "Clumsy Rush", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "clumsy-rush-switch" },
        { title: "Clustertruck", discount_percent: 75, msrp: 21.69, sale_price: 21.69, currency: "BRL", region: "US", game_id: "clustertruck-switch" },
        { title: "CMS", discount_percent: 87, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "cms-switch" },
        { title: "Coast Guard: Beach Rescue Team", discount_percent: 70, msrp: 20.82, sale_price: 20.82, currency: "BRL", region: "US", game_id: "coast-guard-beach-rescue-team-switch" },
        { title: "Collide-a-Ball 2", discount_percent: 50, msrp: 14.44, sale_price: 14.44, currency: "BRL", region: "US", game_id: "collide-a-ball-2-switch" },
        { title: "Color Dots Connect", discount_percent: 50, msrp: 17.34, sale_price: 17.34, currency: "BRL", region: "US", game_id: "color-dots-connect-switch" },
        { title: "Colors and Numbers", discount_percent: 50, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "colors-and-numbers-switch" },
        { title: "Cooking Simulator", discount_percent: 90, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "cooking-simulator-switch" },
        { title: "Cooking Simulator - Pizza", discount_percent: 30, msrp: 60.84, sale_price: 60.84, currency: "BRL", region: "US", game_id: "cooking-simulator-pizza-switch" },
        { title: "Cooking Tycoons - 3 in 1 Bundle", discount_percent: 85, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "cooking-tycoons-3-in-1-bundle-switch" },
        { title: "Country Tales", discount_percent: 80, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "country-tales-switch" },
        { title: "Crash Drive 2", discount_percent: 78, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "crash-drive-2-switch" },
        { title: "Crash Drive 3", discount_percent: 90, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "crash-drive-3-switch" },
        { title: "Crazy Zen Codeword", discount_percent: 80, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "crazy-zen-codeword-switch" },
        { title: "Crazy Zen Mini Golf", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "crazy-zen-mini-golf-switch" },
        { title: "Croc's World 3", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "crocs-world-3-switch" },
        { title: "Crowdy Farm Puzzle", discount_percent: 67, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "crowdy-farm-puzzle-switch" },
        { title: "Crowdy Farm Rush", discount_percent: 67, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "crowdy-farm-rush-switch" },
        { title: "Cube Blast: Match", discount_percent: 70, msrp: 31.32, sale_price: 31.32, currency: "BRL", region: "US", game_id: "cube-blast-match-switch" },
        { title: "Cuccchi", discount_percent: 30, msrp: 32.42, sale_price: 32.42, currency: "BRL", region: "US", game_id: "cuccchi-switch" },
        { title: "Cue Sports", discount_percent: 60, msrp: 13.69, sale_price: 13.69, currency: "BRL", region: "US", game_id: "cue-sports-switch" },
        { title: "Cyber Protocol", discount_percent: 80, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "cyber-protocol-switch" },
        { title: "Dandy Dungeon - Legend of Brave Yamada -", discount_percent: 30, msrp: 77.08, sale_price: 77.08, currency: "BRL", region: "US", game_id: "dandy-dungeon-legend-of-brave-yamada-switch" },
        { title: "Darius Cozmic Collection Arcade", discount_percent: 50, msrp: 130.44, sale_price: 130.44, currency: "BRL", region: "US", game_id: "darius-cozmic-collection-arcade-switch" },
        { title: "Darius Cozmic Collection Console", discount_percent: 60, msrp: 139.14, sale_price: 139.14, currency: "BRL", region: "US", game_id: "darius-cozmic-collection-console-switch" },
        { title: "Darts Up", discount_percent: 33, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "darts-up-switch" },
        { title: "Death Squared", discount_percent: 87, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "death-squared-switch" },
        { title: "Desktop Baseball", discount_percent: 70, msrp: 12.64, sale_price: 12.64, currency: "BRL", region: "US", game_id: "desktop-baseball-switch" },
        { title: "Desktop Basketball", discount_percent: 70, msrp: 12.53, sale_price: 12.53, currency: "BRL", region: "US", game_id: "desktop-basketball-switch" },
        { title: "Desktop Dodgeball", discount_percent: 70, msrp: 12.93, sale_price: 12.93, currency: "BRL", region: "US", game_id: "desktop-dodgeball-switch" },
        { title: "Desktop Soccer", discount_percent: 70, msrp: 12.35, sale_price: 12.35, currency: "BRL", region: "US", game_id: "desktop-soccer-switch" },
        { title: "Detective Driver: Miami Files", discount_percent: 70, msrp: 20.82, sale_price: 20.82, currency: "BRL", region: "US", game_id: "detective-driver-miami-files-switch" },
        { title: "Devastator", discount_percent: 29, msrp: 28.94, sale_price: 28.94, currency: "BRL", region: "US", game_id: "devastator-switch" },
        { title: "Diggerman", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "diggerman-switch" },
        { title: "Dirt Bike Retro", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "dirt-bike-retro-switch" },
        { title: "Discolored", discount_percent: 55, msrp: 26.04, sale_price: 26.04, currency: "BRL", region: "US", game_id: "discolored-switch" },
        { title: "Doodle Derby", discount_percent: 75, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "doodle-derby-switch" },
        { title: "Doughlings: Arcade", discount_percent: 70, msrp: 12.12, sale_price: 12.12, currency: "BRL", region: "US", game_id: "doughlings-arcade-switch" },
        { title: "Doughlings: Invasion", discount_percent: 70, msrp: 17.34, sale_price: 17.34, currency: "BRL", region: "US", game_id: "doughlings-invasion-switch" },
        { title: "Drawn to Life: Two Realms", discount_percent: 50, msrp: 28.94, sale_price: 28.94, currency: "BRL", region: "US", game_id: "drawn-to-life-two-realms-switch" },
        { title: "DRIVE DRIFT X", discount_percent: 70, msrp: 14.91, sale_price: 14.91, currency: "BRL", region: "US", game_id: "drive-drift-x-switch" },
        { title: "Driving World: Aspen", discount_percent: 60, msrp: 27.78, sale_price: 27.78, currency: "BRL", region: "US", game_id: "driving-world-aspen-switch" },
        { title: "Driving World: Nordic Challenge", discount_percent: 60, msrp: 32.42, sale_price: 32.42, currency: "BRL", region: "US", game_id: "driving-world-nordic-challenge-switch" },
        { title: "Drum Box", discount_percent: 50, msrp: 23.14, sale_price: 23.14, currency: "BRL", region: "US", game_id: "drum-box-switch" },
        { title: "Dungeon Solver", discount_percent: 50, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "dungeon-solver-switch" },
        { title: "Dyna Bomb", discount_percent: 50, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "dyna-bomb-switch" },
        { title: "Eat your letters", discount_percent: 60, msrp: 13.86, sale_price: 13.86, currency: "BRL", region: "US", game_id: "eat-your-letters-switch" },
        { title: "El Hijo - A Wild West Tale", discount_percent: 25, msrp: 86.94, sale_price: 86.94, currency: "BRL", region: "US", game_id: "el-hijo-a-wild-west-tale-switch" },
        { title: "Emergency Driver Simulator", discount_percent: 60, msrp: 32.42, sale_price: 32.42, currency: "BRL", region: "US", game_id: "emergency-driver-simulator-switch" },
        { title: "Energy Cycle Edge", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "energy-cycle-edge-switch" },
        { title: "EQI", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "eqi-switch" },
        { title: "Escape Game : Aloha", discount_percent: 67, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "escape-game-aloha-switch" },
        { title: "Factotum 90", discount_percent: 75, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "factotum-90-switch" },
        { title: "Faircroft's Antiques: Home for Christmas Collector's Edition", discount_percent: 80, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "faircrofts-antiques-home-for-christmas-collectors-edition-switch" },
        { title: "Faircroft's Antiques: The Forbidden Crypt Collector's Edition", discount_percent: 40, msrp: 34.74, sale_price: 34.74, currency: "BRL", region: "US", game_id: "faircrofts-antiques-the-forbidden-crypt-collectors-edition-switch" },
        { title: "Faircroft's Antiques: The Heir of Glen Kinnoch Collector's Edition", discount_percent: 80, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "faircrofts-antiques-the-heir-of-glen-kinnoch-collectors-edition-switch" },
        { title: "Family Tree", discount_percent: 75, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "family-tree-switch" },
        { title: "Farm Mystery", discount_percent: 80, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "farm-mystery-switch" },
        { title: "Find 10 Differences", discount_percent: 67, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "find-10-differences-switch" },
        { title: "Finding Teddy 2 : Definitive Edition", discount_percent: 70, msrp: 17.34, sale_price: 17.34, currency: "BRL", region: "US", game_id: "finding-teddy-2-definitive-edition-switch" },
        { title: "Fishing Universe Simulator", discount_percent: 80, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "fishing-universe-simulator-switch" },
        { title: "Zumba¬Æ Burn It Up!", discount_percent: 50, msrp: 115.94, sale_price: 115.94, currency: "BRL", region: "US", game_id: "zumba-burn-it-up-switch" },
        { title: "Zumba Aqua", discount_percent: 33, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "zumba-aqua-switch" },
        { title: "Zombie Rollerz: Pinball Heroes", discount_percent: 50, msrp: 43.44, sale_price: 43.44, currency: "BRL", region: "US", game_id: "zombie-rollerz-pinball-heroes-switch" },
        { title: "Zen Chess Collection", discount_percent: 50, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "zen-chess-collection-switch" },
        { title: "Yooka-Laylee and the Impossible Lair", discount_percent: 75, msrp: 43.44, sale_price: 43.44, currency: "BRL", region: "US", game_id: "yooka-laylee-and-the-impossible-lair-switch" },
        { title: "YOGA MASTER", discount_percent: 30, msrp: 101.44, sale_price: 101.44, currency: "BRL", region: "US", game_id: "yoga-master-switch" },
        { title: "Xtreme Club Racing", discount_percent: 80, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "xtreme-club-racing-switch" },
        { title: "Xenogunner", discount_percent: 50, msrp: 43.44, sale_price: 43.44, currency: "BRL", region: "US", game_id: "xenogunner-switch" },
        { title: "Wreckin' Ball Adventure", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "wreckin-ball-adventure-switch" },
        { title: "World Soccer Pinball", discount_percent: 33, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "world-soccer-pinball-switch" },
        { title: "Working Zombies", discount_percent: 30, msrp: 81.14, sale_price: 81.14, currency: "BRL", region: "US", game_id: "working-zombies-switch" },
        { title: "Word Crush Hidden", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "word-crush-hidden-switch" },
        { title: "Woodle Tree Adventures", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "woodle-tree-adventures-switch" },
        { title: "Woodle Tree 2: Deluxe", discount_percent: 70, msrp: 22.56, sale_price: 22.56, currency: "BRL", region: "US", game_id: "woodle-tree-2-deluxe-switch" },
        { title: "Wood Block Escape Puzzles 3", discount_percent: 50, msrp: 17.34, sale_price: 17.34, currency: "BRL", region: "US", game_id: "wood-block-escape-puzzles-3-switch" },
        { title: "Wood Block Escape Puzzles 2", discount_percent: 60, msrp: 13.86, sale_price: 13.86, currency: "BRL", region: "US", game_id: "wood-block-escape-puzzles-2-switch" },
        { title: "Wood Block Escape Puzzles", discount_percent: 50, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "wood-block-escape-puzzles-switch" },
        { title: "WINGSPAN", discount_percent: 41, msrp: 68.38, sale_price: 68.38, currency: "BRL", region: "US", game_id: "wingspan-switch" },
        { title: "Wild & Horror Pinball", discount_percent: 60, msrp: 34.74, sale_price: 34.74, currency: "BRL", region: "US", game_id: "wild-and-horror-pinball-switch" },
        { title: "Whipseey and the Lost Atlas", discount_percent: 20, msrp: 27.78, sale_price: 27.78, currency: "BRL", region: "US", game_id: "whipseey-and-the-lost-atlas-switch" },
        { title: "while True: learn()", discount_percent: 30, msrp: 52.72, sale_price: 52.72, currency: "BRL", region: "US", game_id: "while-true-learn-switch" },
        { title: "Where the Bees Make Honey", discount_percent: 75, msrp: 14.44, sale_price: 14.44, currency: "BRL", region: "US", game_id: "where-the-bees-make-honey-switch" },
        { title: "Wenjia", discount_percent: 50, msrp: 23.14, sale_price: 23.14, currency: "BRL", region: "US", game_id: "wenjia-switch" },
        { title: "Watermelon Party", discount_percent: 60, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "watermelon-party-switch" },
        { title: "Wanderjahr TryAgainOrWalkAway", discount_percent: 80, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "wanderjahr-tryagainorwalkaway-switch" },
        { title: "Violett", discount_percent: 80, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "violett-switch" },
        { title: "Urban Flow", discount_percent: 87, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "urban-flow-switch" },
        { title: "Unrailed!", discount_percent: 75, msrp: 28.94, sale_price: 28.94, currency: "BRL", region: "US", game_id: "unrailed-switch" },
        { title: "UNBOX: Newbie's Adventure", discount_percent: 80, msrp: 34.74, sale_price: 34.74, currency: "BRL", region: "US", game_id: "unbox-newbies-adventure-switch" },
        { title: "Ultimate Ski Jumping 2020", discount_percent: 80, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "ultimate-ski-jumping-2020-switch" },
        { title: "Ultimate Fishing Simulator", discount_percent: 90, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "ultimate-fishing-simulator-switch" },
        { title: "Two Hundred Ways", discount_percent: 10, msrp: 62.58, sale_price: 62.58, currency: "BRL", region: "US", game_id: "two-hundred-ways-switch" },
        { title: "Twist & Match", discount_percent: 33, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "twist-and-match-switch" },
        { title: "Twin Breaker: A Sacred Symbols Adventure", discount_percent: 60, msrp: 23.14, sale_price: 23.14, currency: "BRL", region: "US", game_id: "twin-breaker-a-sacred-symbols-adventure-switch" },
        { title: "TTV2", discount_percent: 50, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "ttv2-switch" },
        { title: "Trigonal", discount_percent: 33, msrp: 11.54, sale_price: 11.54, currency: "BRL", region: "US", game_id: "trigonal-switch" },
        { title: "Tricky Towers", discount_percent: 50, msrp: 43.44, sale_price: 43.44, currency: "BRL", region: "US", game_id: "tricky-towers-switch" },
        { title: "Trancelation", discount_percent: 60, msrp: 23.14, sale_price: 23.14, currency: "BRL", region: "US", game_id: "trancelation-switch" }
      ];
    }

    // Atualizar estat√≠sticas
    function updateStats() {
      const total = filteredGames.length;
      const onSale = filteredGames.filter(g => g.discount_percent > 0).length;
      const avgDiscount = onSale > 0
        ? Math.round(filteredGames.filter(g => g.discount_percent > 0).reduce((sum, g) => sum + g.discount_percent, 0) / onSale)
        : 0;
      const maxDiscount = total > 0
        ? Math.max(...filteredGames.map(g => g.discount_percent))
        : 0;

      document.getElementById('totalGames').textContent = total;
      document.getElementById('totalSales').textContent = onSale;
      document.getElementById('avgDiscount').textContent = avgDiscount + '%';
      document.getElementById('maxDiscount').textContent = maxDiscount + '%';
    }

    // Renderizar jogos (com scroll infinito)
    function renderGames() {
      const grid = document.getElementById('gamesGrid');

      if (filteredGames.length === 0) {
        grid.innerHTML = '<p style="grid-column: 1/-1; text-align: center; color: var(--muted); padding: 60px 20px;">Nenhum jogo encontrado.</p>';
        return;
      }

      // Renderizar apenas os jogos carregados at√© agora
      const gamesHTML = displayedGames.map(game => {
        const hasDiscount = game.discount_percent > 0;
        const price = game.sale_price || game.msrp;

        return `
          <a href="jogo-detalhes.html?id=${game.game_id}" class="game-card">
            <div class="game-cover">${game.title.substring(0, 20).toUpperCase()}</div>
            <div class="game-title">${game.title}</div>
            <div class="game-region">Nintendo Switch ‚Ä¢ ${game.region}</div>
            <div class="game-prices">
              ${hasDiscount ? `<span class="price-old">R$ ${game.msrp.toFixed(2)}</span>` : ''}
              <span class="price">R$ ${price.toFixed(2)}</span>
              ${hasDiscount ? `<span class="badge">-${game.discount_percent}%</span>` : ''}
              ${!hasDiscount ? `<span class="badge badge-success">Pre√ßo normal</span>` : ''}
            </div>
          </a>
        `;
      }).join('');

      // Adicionar sentinel para scroll infinito
      const sentinelHTML = currentIndex < filteredGames.length
        ? '<div id="sentinel" style="grid-column: 1/-1; height: 1px;"></div>'
        : '';

      grid.innerHTML = gamesHTML + sentinelHTML;

      // Configurar observer ap√≥s renderizar
      if (currentIndex < filteredGames.length) {
        setTimeout(() => setupInfiniteScroll(), 100);
      }
    }

    // Aplicar filtros
    function applyFilters() {
      const search = document.getElementById('searchInput').value.toLowerCase();
      const type = document.getElementById('filterType').value;
      const region = document.getElementById('filterRegion').value;
      const sort = document.getElementById('sortBy').value;

      // Filtrar
      filteredGames = allGames.filter(game => {
        const matchSearch = game.title.toLowerCase().includes(search);
        const matchType = type === 'all' ||
          (type === 'sale' && game.discount_percent > 0) ||
          (type === 'no-sale' && game.discount_percent === 0);
        const matchRegion = region === 'all' || game.region === region;

        return matchSearch && matchType && matchRegion;
      });

      // Ordenar
      filteredGames.sort((a, b) => {
        switch (sort) {
          case 'relevance':
            return b.discount_percent - a.discount_percent;
          case 'discount':
            return b.discount_percent - a.discount_percent;
          case 'price-low':
            return (a.sale_price || a.msrp) - (b.sale_price || b.msrp);
          case 'price-high':
            return (b.sale_price || b.msrp) - (a.sale_price || a.msrp);
          case 'title':
            return a.title.localeCompare(b.title);
          default:
            return 0;
        }
      });

      // Resetar pagina√ß√£o quando os filtros mudam
      currentIndex = 0;
      displayedGames = [];
      if (observer) observer.disconnect();

      updateStats();
      loadMoreGames(); // Carregar primeira leva com novos filtros
    }

    // Event listeners
    document.getElementById('searchInput').addEventListener('input', applyFilters);
    document.getElementById('filterType').addEventListener('change', applyFilters);
    document.getElementById('filterRegion').addEventListener('change', applyFilters);
    document.getElementById('sortBy').addEventListener('change', applyFilters);

    // Carregar ao iniciar
    loadGames();
  </script>
</body>
</html>
